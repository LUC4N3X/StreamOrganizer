version: '3.8'

services:
  streamorganizer:
    # Costruisce l'immagine usando il Dockerfile nella cartella corrente
    build: .
    container_name: streamorganizer_app
    
    # Mappa la porta host:container
    # Accederai al sito via http://localhost:8080
    ports:
      - "8080:7860"
    
    # Carica le variabili d'ambiente (es. MONITOR_KEY) dal file .env
    env_file:
      - ./.env
    
    environment:
      # --- IMPORTANTE PER SELF-HOSTING ---
      # 'development' disabilita il requisito "Secure Cookie" (necessario per HTTP locale)
      # Se usi HTTPS (es. tramite Nginx), cambialo in 'production'
      - NODE_ENV=development
      
      # Definisce la porta interna dell'applicazione
      - PORT=7860
      
    # Riavvia il container automaticamente se si spegne o crasha
    restart: unless-stopped
    networks:
      - streamorganizer_net

networks:
  streamorganizer_net:
    driver: bridge
