/* ====== DEFINIZIONI COLORI E TEMI ====== */

:root,
[data-theme="dark"] {
    /* Palette Colori Base (Dark) */
    --primary-color: #BB86FC; /* Purple Neon */
    --secondary-color: #03DAC6; /* Cyan Neon */
    --error-color: #CF6679; /* Pink/Red Neon */
    --accent-color: #FF00FF; /* Magenta Neon for highlights */
    --success-color: #03DAC6; /* Alias for secondary */
    --warning-color: #FFB347; /* Orange */
    --warning-color-alt: #FF9800;

    /* Sfondi (Dark) */
    --bg-dark-primary: #0c0311;
    --bg-dark-secondary: #08020a;
    --body-bg: radial-gradient(circle at top left, var(--bg-dark-primary) 0%, var(--bg-dark-secondary) 80%);
    --app-bg: linear-gradient(135deg, rgba(18,13,25,0.72), rgba(22,15,30,0.5));
    --panel-bg: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.03));
    --stats-panel-bg: linear-gradient(145deg, rgba(20, 10, 35, 0.68), rgba(15, 5, 25, 0.48));
    --modal-bg: linear-gradient(135deg, rgba(18, 12, 24, 0.92), rgba(24, 16, 30, 0.88));
    --modal-overlay-bg: rgba(8, 2, 10, 0.88);
    --toast-bg: linear-gradient(135deg, rgba(30, 30, 40, 0.92), rgba(20, 20, 30, 0.88));
    --header-bg: linear-gradient(180deg, rgba(20,0,40,0.4), rgba(0,0,0,0.25));
    --loader-bg: radial-gradient(circle at center, rgba(10, 2, 20, 0.98), rgba(0, 0, 0, 0.92));
    --code-bg: rgba(0,0,0,0.32);
    
    /* Testo (Dark) */
    --text-color: #e4e4e4;
    --text-muted: rgba(230, 230, 230, 0.75);
    --text-dark: #1f1f1f; /* Usato per testo su bottoni chiari */
    --text-on-primary: #060606;
    --text-h1: #E0B3FF;
    --text-subtitle: rgba(255,255,255,0.8);
    --text-panel-h3: #B9A3FF;
    --text-panel-h3-alt: #7FF7E1;
    --text-stat-strong: #fff;
    --text-footer: rgba(230,230,230,0.55);
    --text-security: #7FF7E1;
    --text-code: #FFA500;
    --text-link: var(--primary-color);
    --text-link-hover: #5e2fd4; /* Vecchio valore hardcoded */
    --text-btn-neutral: #aaa;
    --text-btn-neutral-hover: #fff;
    --text-btn-special-green: #7FF7E1;
    --text-btn-special-purple: #DABFFF;

    /* Bordi (Dark) */
    --border-light: rgba(255, 255, 255, 0.05);
    --app-border: 1px solid var(--border-light);
    --panel-border: 1px solid rgba(187,134,252,0.08);
    --panel-border-hover: 1px solid rgba(187,134,252,0.15);
    --stats-panel-border: 1px solid rgba(187, 134, 252, 0.18);
    --modal-border: 1px solid rgba(187,134,252,0.12);
    --header-border: 1px solid rgba(255,255,255,0.1);
    --footer-border: 1px solid rgba(187,134,252,0.12);
    --input-border: 1px solid rgba(255,255,255,0.08);
    --input-focus-border: rgba(187,134,252,0.38);
    --toast-border-success: 4px solid var(--success-color);
    --toast-border-error: 4px solid var(--error-color);
    --toast-border-info: 4px solid var(--primary-color);

    /* Ombre (Dark) */
    --shadow-dark: rgba(0, 0, 0, 0.6);
    --app-shadow: 0 8px 32px var(--shadow-dark), 0 0 40px var(--neon-glow-primary), inset 0 0 0.5px rgba(255,255,255,0.25);
    --app-shadow-hover: 0 12px 48px var(--shadow-dark), 0 0 65px var(--neon-glow-primary), inset 0 0 1px rgba(255,255,255,0.38);
    --panel-shadow: 0 6px 18px var(--shadow-dark);
    --panel-shadow-hover: 0 8px 24px var(--shadow-dark), 0 0 15px var(--neon-glow-accent);
    --stats-panel-shadow: 0 8px 32px rgba(0, 0, 0, 0.55), inset 0 1px 0 rgba(255, 255, 255, 0.06);
    --modal-shadow: 0 15px 52px rgba(0,0,0,0.85);
    --toast-shadow: 0 5px 18px rgba(0,0,0,0.55);
    --header-shadow: 0 0 25px rgba(180,0,255,0.15);
    --header-h1-shadow: 0 0 8px #C77DFF, 0 0 16px #7C4DFF, 0 0 24px #9F5FFF;
    --header-h1-shadow-hover: 0 0 20px #E69AFF, 0 0 35px #A66BFF;
    --header-neon-line-bg: linear-gradient(90deg, #00E5FF, #BB86FC, #00E5FF);
    --header-neon-line-shadow: 0 0 8px #BB86FC, 0 0 16px #00E5FF;
    --input-focus-shadow: 0 0 20px var(--neon-glow-primary);
    --btn-primary-shadow: 0 6px 22px rgba(99,37,199,0.2), 0 0 10px rgba(3,218,198,0.08);

    /* Neon Glows (Dark) */
    --neon-glow-primary: rgba(187, 134, 252, 0.25);
    --neon-glow-secondary: rgba(3, 218, 198, 0.18);
    --neon-glow-accent: rgba(255, 0, 255, 0.15);

    /* Selezione Testo (Dark) */
    --selection-bg: var(--primary-color);
    --selection-text: #fff;
    --selection-shadow: 0 0 5px var(--neon-glow-primary);

    /* Accessibilità (Dark) */
    --focus-outline-color: var(--secondary-color);
    --focus-shadow: 0 0 20px var(--secondary-color), 0 0 10px var(--neon-glow-secondary);

    /* Scrollbar (Dark) */
    --scrollbar-track-bg: #0b040d;
    --scrollbar-thumb-color: #3a2a45;
    --scrollbar-thumb-bg: linear-gradient(180deg, #412452, #3a2a45);
    --scrollbar-thumb-hover-bg: linear-gradient(180deg, #613c7d, #503a60);
    
    /* Componenti (Dark) */
    --input-bg: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    --input-text: #E9E9F2;
    --input-placeholder: rgba(230,230,230,0.38);
    --btn-primary-bg: linear-gradient(90deg, rgba(187,134,252,1), rgba(3,218,198,0.95));
    --btn-primary-text: var(--text-on-primary);
    --btn-secondary-bg: rgba(0,0,0,0.22);
    --btn-secondary-border: 1px solid rgba(255,255,255,0.06);
    --btn-secondary-text: #fff;
    --btn-secondary-active-bg: linear-gradient(90deg, rgba(187,134,252,1), rgba(3,218,198,0.88));
    --btn-secondary-active-shadow: 0 0 12px rgba(3,218,198,0.22);
    --btn-secondary-active-text: #fff;
    --btn-danger-bg: linear-gradient(90deg, rgba(207,102,121,1), rgba(255,112,140,0.95));
    --btn-danger-text: #080808;
    --btn-neutral-bg: rgba(255, 255, 255, 0.06);
    --btn-neutral-border: 1px solid rgba(255, 255, 255, 0.12);
    --btn-neutral-hover-bg: rgba(255, 255, 255, 0.12);
    --btn-special-green-bg: linear-gradient(90deg, rgba(3, 218, 198, 0.45), rgba(3, 218, 198, 0.22));
    --btn-special-green-border: 1px solid rgba(3, 218, 198, 0.32);
    --btn-special-green-hover-bg: linear-gradient(90deg, rgba(3, 218, 198, 0.55), rgba(3, 218, 198, 0.32));
    --btn-special-purple-bg: linear-gradient(90deg, rgba(187, 134, 252, 0.45), rgba(187, 134, 252, 0.22));
    --btn-special-purple-border: 1px solid rgba(187, 134, 252, 0.32);
    --btn-special-purple-hover-bg: linear-gradient(90deg, rgba(187, 134, 252, 0.55), rgba(187, 134, 252, 0.32));
    --addon-bg: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    --addon-border-left: 4px solid rgba(187,134,252,0.88);
    --addon-border-left-disabled: #555;
    --addon-h3: #F3F3FF;
    --addon-p: var(--text-muted);
    --addon-icon-bg: linear-gradient(135deg, rgba(255,255,255,0.03), rgba(0,0,0,0.05));
    --addon-extra-bg: rgba(0,0,0,0.18);
    --addon-extra-border-top: 1px solid rgba(187, 134, 252, 0.12);
    --addon-extra-h4: #7FF7E1;
    --addon-extra-h4-border: 1px solid rgba(127, 247, 225, 0.18);
    --addon-extra-li-strong: #B9A3FF;
    --addon-extra-li-text: rgba(230,230,230,0.82);
    --controls-btn-bg: linear-gradient(180deg, rgba(60,60,70,0.65), rgba(30,30,40,0.75));
    --controls-btn-border: 1px solid rgba(255,255,255,0.06);
    --controls-btn-text: #C0B0FF;
    --controls-btn-hover-bg: linear-gradient(180deg, rgba(80,80,90,0.75), rgba(50,50,60,0.85));
    --controls-btn-hover-text: #E0D8FF;
    --controls-btn-top-text: #7FFFD4;
    --controls-btn-bottom-text: #FFB347;
    --icon-btn-bg: rgba(0,0,0,0.48);
    --icon-btn-border: 1px solid rgba(255,255,255,0.04);
    --icon-btn-text: #EDEDED;
    --icon-btn-hover-bg: rgba(30,30,30,0.65);
    --status-unchecked-bg: #808080;
    --status-ok-bg: var(--success-color);
    --status-error-bg: var(--error-color);
    --status-checking-bg: var(--primary-color);
    --slider-bg: #333;
    --slider-checked-bg: var(--success-color);
    --slider-checked-no-update-bg: var(--error-color);
    --slider-ball-bg: white;
    --stat-value-enabled: var(--success-color);
    --stat-value-disabled: #aaa;
    --stat-value-errors: var(--error-color);
    --stat-bar-bg: rgba(255,255,255,0.06);
    --stat-bar-enabled-bg: var(--success-color);
    --stat-bar-errors-bg: var(--error-color);
    --stat-bar-disabled-bg: #666;
    --bulk-actions-bg: linear-gradient(180deg, rgba(33,150,243,0.12), rgba(3,218,198,0.06));
    --bulk-actions-border: 1px solid rgba(3,218,198,0.18);
    --bulk-actions-strong: #7FF7E1;
    --bulk-actions-btn-bg: rgba(0,0,0,0.32);
    --bulk-actions-btn-border: 1px solid rgba(255,255,255,0.1);
    --checkbox-accent-color: var(--primary-color);
    --search-btn-bg: rgba(0,0,0,0.22);
    --search-btn-border: 1px solid rgba(255,255,255,0.06);
    --search-btn-text: var(--primary-color);
    --search-input-bg: linear-gradient(180deg, rgba(14,9,18,0.88), rgba(16,10,22,0.78));
    --search-input-border: 1px solid rgba(187,134,252,0.22);
    --floating-save-btn-bg: linear-gradient(45deg, #03DAC6, #7FFFD4);
    --floating-save-btn-text: #111;
    --lang-select-bg: rgba(0,0,0,0.22);
    --lang-select-border: 1px solid rgba(255, 255, 255, 0.12);
    --lang-select-text: #E6E6E6;
    --lang-select-arrow: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23BB86FC' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
    --lang-select-option-bg: #1a1a2e;
    --security-notice-bg: rgba(255,255,255,0.05);
    --security-notice-border: 1px solid rgba(255,255,255,0.1);
}

[data-theme="light"] {
    /* Palette Colori Base (Light) */
    --primary-color: #2979FF; /* Blue */
    --secondary-color: #1DE9B6; /* Green/Cyan */
    --error-color: #FF1744; /* Red */
    --accent-color: #FF00FF; /* Magenta Neon (mantenuto) */
    --success-color: #1DE9B6;
    --warning-color: #FFA500;
    --warning-color-alt: #FF9800;
    
    /* Sfondi (Light) */
    --bg-light-primary: #fafafa;
    --bg-light-secondary: #f4f4f4;
    --body-bg: radial-gradient(circle at top left, var(--bg-light-primary) 0%, var(--bg-light-secondary) 80%);
    --app-bg: linear-gradient(135deg, rgba(255,255,255,0.88), rgba(245,245,245,0.78));
    --panel-bg: rgba(255,255,255,0.65);
    --stats-panel-bg: linear-gradient(145deg, rgba(255,255,255,0.92), rgba(240,240,240,0.92));
    --modal-bg: linear-gradient(135deg, rgba(245, 245, 250, 0.92), rgba(250, 250, 255, 0.88));
    --modal-overlay-bg: rgba(255, 255, 255, 0.88);
    --toast-bg: linear-gradient(135deg, rgba(255, 255, 255, 0.92), rgba(245, 245, 245, 0.88));
    --header-bg: transparent; /* Semplificato per light mode */
    --loader-bg: rgba(255, 255, 255, 0.9);
    --code-bg: rgba(0,0,0,0.12);

    /* Testo (Light) */
    --text-color: #333333;
    --text-muted: rgba(51, 51, 51, 0.75);
    --text-dark: #1f1f1f;
    --text-on-primary: #000;
    --text-h1: var(--primary-color);
    --text-subtitle: rgba(51,51,51,0.88);
    --text-panel-h3: var(--primary-color);
    --text-panel-h3-alt: var(--secondary-color);
    --text-stat-strong: #555;
    --text-footer: rgba(51,51,51,0.65);
    --text-security: #004D40;
    --text-code: #FF5252;
    --text-link: var(--primary-color);
    --text-link-hover: #5e2fd4;
    --text-btn-neutral: #555;
    --text-btn-neutral-hover: #111;
    --text-btn-special-green: #004D40;
    --text-btn-special-purple: #2979FF;

    /* Bordi (Light) */
    --border-dark: rgba(0, 0, 0, 0.1);
    --app-border: 1px solid rgba(0,0,0,0.12);
    --panel-border: 1px solid rgba(0,0,0,0.12);
    --panel-border-hover: 1px solid rgba(0,0,0,0.12); /* Semplificato */
    --stats-panel-border: 1px solid rgba(41, 121, 255, 0.2);
    --modal-border: 1px solid rgba(41, 121, 255, 0.12);
    --header-border: 1px solid rgba(0,0,0,0.1);
    --footer-border: 1px solid rgba(41, 121, 255, 0.12);
    --input-border: 1px solid rgba(0,0,0,0.12);
    --input-focus-border: rgba(41, 121, 255, 0.38);
    --toast-border-success: 4px solid var(--success-color);
    --toast-border-error: 4px solid var(--error-color);
    --toast-border-info: 4px solid var(--primary-color);

    /* Ombre (Light) */
    --shadow-light: rgba(0, 0, 0, 0.1);
    --app-shadow: 0 10px 42px rgba(0,0,0,0.12), 0 0 65px rgba(187, 134, 252, 0.12), inset 0 1px 0 rgba(0,0,0,0.06);
    --app-shadow-hover: 0 12px 48px rgba(0,0,0,0.15), 0 0 75px rgba(187, 134, 252, 0.15), inset 0 1px 0 rgba(0,0,0,0.06);
    --panel-shadow: 0 3px 12px rgba(0,0,0,0.06);
    --panel-shadow-hover: 0 4px 14px rgba(0,0,0,0.08);
    --stats-panel-shadow: 0 12px 42px rgba(0,0,0,0.06);
    --modal-shadow: 0 15px 52px rgba(0,0,0,0.22);
    --toast-shadow: 0 5px 18px rgba(0,0,0,0.12);
    --header-shadow: none;
    --header-h1-shadow: none;
    --header-h1-shadow-hover: none;
    --header-neon-line-bg: linear-gradient(90deg, transparent, rgba(41, 121, 255, 0.48), transparent);
    --header-neon-line-shadow: none;
    --input-focus-shadow: 0 0 20px rgba(41, 121, 255, 0.2);
    --btn-primary-shadow: 0 6px 22px rgba(41, 121, 255, 0.2), 0 0 10px rgba(29, 233, 182, 0.08);

    /* Neon Glows (Light) - Disattivati o ridotti */
    --neon-glow-primary: rgba(41, 121, 255, 0.1);
    --neon-glow-secondary: rgba(29, 233, 182, 0.08);
    --neon-glow-accent: rgba(255, 0, 255, 0.05);
    
    /* Selezione Testo (Light) */
    --selection-bg: #b197ff;
    --selection-text: #fff;
    --selection-shadow: none;

    /* Accessibilità (Light) */
    --focus-outline-color: var(--primary-color);
    --focus-shadow: 0 0 15px var(--neon-glow-primary);

    /* Scrollbar (Light) */
    --scrollbar-track-bg: var(--bg-light-secondary);
    --scrollbar-thumb-color: #bdbdbd;
    --scrollbar-thumb-bg: linear-gradient(180deg, #bfbfbf, #aaaaaa);
    --scrollbar-thumb-hover-bg: linear-gradient(180deg, #9e9e9e, #888888);

    /* Componenti (Light) */
    --input-bg: rgba(255,255,255,0.92);
    --input-text: #333;
    --input-placeholder: rgba(51,51,51,0.55);
    --btn-primary-bg: linear-gradient(90deg, #1DE9B6, #2979FF);
    --btn-primary-text: var(--text-on-primary);
    --btn-secondary-bg: #E0E0E0;
    --btn-secondary-border: 1px solid rgba(0,0,0,0.12);
    --btn-secondary-text: #333;
    --btn-secondary-active-bg: linear-gradient(90deg, #2196F3, #2979FF);
    --btn-secondary-active-shadow: none;
    --btn-secondary-active-text: #fff;
    --btn-danger-bg: linear-gradient(90deg, #FF1744, #FF5252);
    --btn-danger-text: #fff;
    --btn-neutral-bg: rgba(0, 0, 0, 0.1);
    --btn-neutral-border: 1px solid rgba(0, 0, 0, 0.12);
    --btn-neutral-hover-bg: rgba(0, 0, 0, 0.15);
    --btn-special-green-bg: rgba(29, 233, 182, 0.22);
    --btn-special-green-border: 1px solid rgba(29, 233, 182, 0.45);
    --btn-special-green-hover-bg: rgba(29, 233, 182, 0.3);
    --btn-special-purple-bg: rgba(41, 121, 255, 0.18);
    --btn-special-purple-border: 1px solid rgba(41, 121, 255, 0.32);
    --btn-special-purple-hover-bg: rgba(41, 121, 255, 0.25);
    --addon-bg: rgba(255,255,255,0.75);
    --addon-border-left: 4px solid var(--primary-color);
    --addon-border-left-disabled: #999;
    --addon-h3: #222;
    --addon-p: rgba(51,51,51,0.78);
    --addon-icon-bg: rgba(0,0,0,0.06);
    --addon-extra-bg: rgba(255,255,255,0.55);
    --addon-extra-border-top: 1px solid rgba(41, 121, 255, 0.12);
    --addon-extra-h4: var(--secondary-color);
    --addon-extra-h4-border: 1px solid rgba(29, 233, 182, 0.18);
    --addon-extra-li-strong: var(--primary-color);
    --addon-extra-li-text: rgba(51,51,51,0.82);
    --controls-btn-bg: #EAEAEA;
    --controls-btn-border: 1px solid rgba(0,0,0,0.12);
    --controls-btn-text: #444;
    --controls-btn-hover-bg: #DCDCDC;
    --controls-btn-hover-text: #333;
    --controls-btn-top-text: var(--secondary-color);
    --controls-btn-bottom-text: var(--warning-color);
    --icon-btn-bg: #E0E0E0;
    --icon-btn-border: 1px solid rgba(0,0,0,0.12);
    --icon-btn-text: #333;
    --icon-btn-hover-bg: #D5D5D5;
    --status-unchecked-bg: #808080;
    --status-ok-bg: var(--success-color);
    --status-error-bg: var(--error-color);
    --status-checking-bg: var(--primary-color);
    --slider-bg: #AAA;
    --slider-checked-bg: var(--success-color);
    --slider-checked-no-update-bg: #FF5252;
    --slider-ball-bg: white;
    --stat-value-enabled: var(--success-color);
    --stat-value-disabled: #aaa;
    --stat-value-errors: var(--error-color);
    --stat-bar-bg: rgba(0,0,0,0.06);
    --stat-bar-enabled-bg: var(--success-color);
    --stat-bar-errors-bg: var(--error-color);
    --stat-bar-disabled-bg: #bbb;
    --bulk-actions-bg: linear-gradient(180deg, rgba(41, 121, 255, 0.12), rgba(29, 233, 182, 0.06));
    --bulk-actions-border: 1px solid rgba(29, 233, 182, 0.18);
    --bulk-actions-strong: var(--secondary-color);
    --bulk-actions-btn-bg: rgba(0,0,0,0.12);
    --bulk-actions-btn-border: 1px solid rgba(0,0,0,0.12);
    --checkbox-accent-color: var(--primary-color);
    --search-btn-bg: rgba(0,0,0,0.12);
    --search-btn-border: 1px solid rgba(0,0,0,0.12);
    --search-btn-text: var(--primary-color);
    --search-input-bg: linear-gradient(180deg, rgba(255,255,255,0.88), rgba(245,245,245,0.78));
    --search-input-border: 1px solid rgba(41, 121, 255, 0.22);
    --floating-save-btn-bg: linear-gradient(45deg, #1DE9B6, #2979FF);
    --floating-save-btn-text: #000;
    --lang-select-bg: #E0E0E0;
    --lang-select-border: 1px solid rgba(0,0,0,0.12);
    --lang-select-text: #333;
    --lang-select-arrow: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%232979FF' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
    --lang-select-option-bg: #fff;
    --security-notice-bg: rgba(29, 233, 182, 0.12);
    --security-notice-border: 1px solid rgba(29, 233, 182, 0.32);
}
